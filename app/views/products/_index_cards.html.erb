<%= render 'shared/slogan' %>
<div class="container product-index">
  <div class="row">
    <div class="col-md-8 col-lg-8 mx-auto">
      <div class="row">
        <% @products.each do |product| %>
          <div class="col-6 col-sm-6 col-md-6 col-lg-4 mx-auto">
            <div class="product-card-shape">
              <div class="product-card">
                <div class="row">
                  <div class=" col-7 col-sm-6 col-md-6 col-lg-7"></div>
                  <div class="col-2 col-sm-2 col-md-2 col-lg-2 mx-auto">
                    <div class="i-love-it" id='flag'>
                      <i class="far fa-heart"></i>
                    </div>
                  </div>
                </div>
                <%= cl_image_tag product.photo.key, class: 'img-fluid' %>
              </div>
              <p class='caracteristic-price'><%= product.price %> E</p>

              <div class="card-product-caracteristics">
                <h1 class="card-product-title">
                  <%= product.name %>
                </h1>
                <p class='caracteristic'><%= product.subcategory.name %></p>
                <p class='caracteristic'>PTAC: <%= product.empty_weight %> kg</p>
                <p class='best-caracteristic'>Idéal pour: product.caracteristic</p>
                <div class="btn btn-ghost" data-bs-toggle="modal" data-bs-target="#modal-<%= product.id %>">aperçu rapide</div>
                <div class="btn btn-flat">Acheter</div>
              </div>
            </div>
          </div>
          <!-- Modal -->
          <div class="modal fade" id="modal-<%= product.id %>" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel"><%= product.name %></h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <div class="row">
                    <div class="col-lg-6">
                      <div class="row">
                        <div class="col-lg-10">
                          <div class="product-card-details">
                            <% if product.length.present? %>
                              <p class="product-card-detail">Longueur: <%= product.length %> mètres</p>
                              <div class='trailer-length'>
                                <i class="fas fa-chevron-left arrow-left"></i>
                                <i class="fas fa-chevron-right arrow-right"></i>
                              </div>
                            <% end %>
                            <%= cl_image_tag product.photo.key, class: 'img-fluid center' %>
                          </div>
                        </div>
                        <div class="col-lg-1">
                          <% if product.heigth.present? %>
                            <div class='trailer-height'>
                              <i class="fas fa-chevron-up arrow-top"></i>
                              <i class="fas fa-chevron-down arrow-down"></i>
                            </div>
                          <% end %>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-lg-10">
                          <div class="product-card-details">
                            <% if product.length.present? %>
                              <p class="product-card-detail">Largeur: <%= product.width %> mètres</p>
                              <div class='trailer-width'>
                                <i class="fas fa-chevron-left arrow-left"></i>
                                <i class="fas fa-chevron-right arrow-right"></i>
                              </div>
                            <% end %>
                            <%= cl_image_tag product.photo.key, class: 'img-fluid center' %>
                          </div>
                          <p class= "product-card-detail"><%= product.name %></p>
                          <p class= "product-card-detail">
                            <% 5.times do %>
                              <i class="fas fa-star"></i>
                            <% end %>
                          </p>
                          <p class='modal-caracteristic-subcategory'><%= product.subcategory.name %></p>
                          <p class='modal-caracteristic-price'><%= product.price %> E</p>
                        </div>
                      </div>
                    </div>

                    <div class="col-lg-6">
                      <div class="row product-detailled">
                        <div class="col-lg-8 mx-auto">
                          <div class="product-card-details">
                            <%= cl_image_tag product.photo.key, class: 'img-fluid center' %>
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-lg-8 mx-auto">
                          <div class="product-card-details">
                            <%= cl_image_tag product.photo.key, class: 'img-fluid center' %>
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-lg-8 mx-auto">
                          <div class="product-card-details">
                            <%= cl_image_tag product.photo.key, class: 'img-fluid center' %>
                          </div>
                        </div>
                      </div>

                      <p class='product-card-detail'>Réglementation: <%= product.document.name %></p>
                      <p class='product-card-detail'>Les points forts</p>
                      <div class="row">
                        <div class="col-lg-6 mx-auto">
                          <p><span class='colored'><i class="fas fa-check-circle"></i></span> Usages <%=product.usage.name %>s </p>
                          <% if product.best_uses.present? %>
                            <% product.best_uses.each do |b| %>
                              <p><span class='colored'><i class="fas fa-check-circle"></i></span> <%= b.name %></p>
                            <% end %>
                          <% end %>
                          <% if product.warranty.present? %>
                            <p><span class='colored'><i class="fas fa-check-circle"></i></span> Garantie <%= product.warranty %> ans</p>
                          <% end %>
                        </div>
                      </div>

                    </div>
                  </div>

                  <div class="row">
                    <ul class="nav nav-tabs" id="myTab-<%= product.id %>" role="tablist">
                      <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home-<%= product.id %>" type="button" role="tab" aria-controls="home" aria-selected="true">Home</button>
                      </li>
                      <li class="nav-item" role="presentation">
                        <button class="nav-link" id="profile-tab-<%= product.id %>" data-bs-toggle="tab" data-bs-target="#profile-<%= product.id %>" type="button" role="tab" aria-controls="profile" aria-selected="false">Profile</button>
                      </li>
                      <li class="nav-item" role="presentation">
                        <button class="nav-link" id="messages-tab-<%= product.id %>" data-bs-toggle="tab" data-bs-target="#messages-<%= product.id %>" type="button" role="tab" aria-controls="messages" aria-selected="false">Messages</button>
                      </li>
                      <li class="nav-item" role="presentation">
                        <button class="nav-link" id="settings-tab-<%= product.id %>" data-bs-toggle="tab" data-bs-target="#settings-<%= product.id %>" type="button" role="tab" aria-controls="settings" aria-selected="false">Settings</button>
                      </li>
                    </ul>

                    <div class="tab-content">
                      <div class="tab-pane active" id="home-<%= product.id %>" role="tabpanel" aria-labelledby="home-tab">...</div>
                      <div class="tab-pane" id="profile-<%= product.id %>" role="tabpanel" aria-labelledby="profile-tab">bla</div>
                      <div class="tab-pane" id="messages-<%= product.id %>" role="tabpanel" aria-labelledby="messages-tab">...</div>
                      <div class="tab-pane" id="settings-<%= product.id %>" role="tabpanel" aria-labelledby="settings-tab">...</div>
                    </div>

                    <script>
                      var firstTabEl = document.querySelector('#myTab li:last-child button')
                      var firstTab = new bootstrap.Tab(firstTabEl)

                      firstTab.show()
                    </script>
                  </div>

                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>


